{"uid":"e37804f2ddd1a5cc","name":"Переход в чек-аут","fullName":"tests.test_cart#test_cart_checkout","historyId":"557936025a2322f00a50d62fc40dc4d9","time":{"start":1724013100582,"stop":1724013124704,"duration":24122},"status":"failed","statusMessage":"AssertionError: Page URL expected to be 'https://garwin.ru/checkout'\nActual value: https://garwin.ru/cart \nCall log:\nPageAssertions.to_have_url with timeout 5000ms\n  - waiting for locator(\":root\")\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"","statusTrace":"page = <Page url='https://garwin.ru/cart'>, base_url = 'https://garwin.ru'\n\n    @pytest.mark.smoke\n    @allure.title(\"Переход в чек-аут\")\n    def test_cart_checkout(page, base_url):\n        cart_page = CartPage(page)\n        autorization = AutorizationModalElement(page)\n        cart_page.add_to_cart(base_url)\n        cart_page.open(base_url)\n        cart_page.click_order_button()\n        autorization.cart_autorization_send_code()\n        code = autorization.get_autorization_code_mail_ru()\n        autorization.complete_autorization(code)\n        # cart_page.click_to_checkbox_for_all_products() # При переходе в корзину, галочки сняты, проверить не баг ли это\n        cart_page.click_order_button()\n>       expect(page).to_have_url(f\"{base_url}/checkout\")\nE       AssertionError: Page URL expected to be 'https://garwin.ru/checkout'\nE       Actual value: https://garwin.ru/cart \nE       Call log:\nE       PageAssertions.to_have_url with timeout 5000ms\nE         - waiting for locator(\":root\")\nE         -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\nE         -   unexpected value \"https://garwin.ru/cart\"\nE         -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\nE         -   unexpected value \"https://garwin.ru/cart\"\nE         -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\nE         -   unexpected value \"https://garwin.ru/cart\"\nE         -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\nE         -   unexpected value \"https://garwin.ru/cart\"\nE         -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\nE         -   unexpected value \"https://garwin.ru/cart\"\nE         -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\nE         -   unexpected value \"https://garwin.ru/cart\"\nE         -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\nE         -   unexpected value \"https://garwin.ru/cart\"\nE         -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\nE         -   unexpected value \"https://garwin.ru/cart\"\nE         -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\nE         -   unexpected value \"https://garwin.ru/cart\"\n\ntest_cart.py:36: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"context","time":{"start":1724013100504,"stop":1724013100513,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0},{"name":"page","time":{"start":1724013100513,"stop":1724013100582,"duration":69},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0}],"testStage":{"status":"failed","statusMessage":"AssertionError: Page URL expected to be 'https://garwin.ru/checkout'\nActual value: https://garwin.ru/cart \nCall log:\nPageAssertions.to_have_url with timeout 5000ms\n  - waiting for locator(\":root\")\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"","statusTrace":"page = <Page url='https://garwin.ru/cart'>, base_url = 'https://garwin.ru'\n\n    @pytest.mark.smoke\n    @allure.title(\"Переход в чек-аут\")\n    def test_cart_checkout(page, base_url):\n        cart_page = CartPage(page)\n        autorization = AutorizationModalElement(page)\n        cart_page.add_to_cart(base_url)\n        cart_page.open(base_url)\n        cart_page.click_order_button()\n        autorization.cart_autorization_send_code()\n        code = autorization.get_autorization_code_mail_ru()\n        autorization.complete_autorization(code)\n        # cart_page.click_to_checkbox_for_all_products() # При переходе в корзину, галочки сняты, проверить не баг ли это\n        cart_page.click_order_button()\n>       expect(page).to_have_url(f\"{base_url}/checkout\")\nE       AssertionError: Page URL expected to be 'https://garwin.ru/checkout'\nE       Actual value: https://garwin.ru/cart \nE       Call log:\nE       PageAssertions.to_have_url with timeout 5000ms\nE         - waiting for locator(\":root\")\nE         -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\nE         -   unexpected value \"https://garwin.ru/cart\"\nE         -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\nE         -   unexpected value \"https://garwin.ru/cart\"\nE         -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\nE         -   unexpected value \"https://garwin.ru/cart\"\nE         -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\nE         -   unexpected value \"https://garwin.ru/cart\"\nE         -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\nE         -   unexpected value \"https://garwin.ru/cart\"\nE         -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\nE         -   unexpected value \"https://garwin.ru/cart\"\nE         -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\nE         -   unexpected value \"https://garwin.ru/cart\"\nE         -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\nE         -   unexpected value \"https://garwin.ru/cart\"\nE         -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\nE         -   unexpected value \"https://garwin.ru/cart\"\n\ntest_cart.py:36: AssertionError","steps":[{"name":"Добавляю товар(stm) в корзину","time":{"start":1724013100582,"stop":1724013102568,"duration":1986},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"url","value":"'https://garwin.ru'"}],"hasContent":true,"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0},{"name":"Открываю https://garwin.ru/cart","time":{"start":1724013102568,"stop":1724013103355,"duration":787},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0},{"name":"Нажимаю на кнопку 'Оформить заказ'","time":{"start":1724013103355,"stop":1724013103430,"duration":75},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0},{"name":"Нажимаю на кнопку 'Оформить заказ'","time":{"start":1724013119397,"stop":1724013119679,"duration":282},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0}],"attachments":[],"parameters":[],"hasContent":true,"attachmentsCount":0,"shouldDisplayMessage":true,"attachmentStep":false,"stepsCount":4},"afterStages":[{"name":"page::0","time":{"start":1724013124711,"stop":1724013124713,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0},{"name":"context::0","time":{"start":1724013124713,"stop":1724013124724,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0}],"labels":[{"name":"tag","value":"smoke"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_cart"},{"name":"host","value":"garagenote-234"},{"name":"thread","value":"14388-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cart"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"}],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["smoke"]},"source":"e37804f2ddd1a5cc.json","parameterValues":["'chromium'"]}