{"uid":"e359d814d7de107d","name":"Применение валидного промокода к неподходящему товару","fullName":"tests.test_checkout#test_checkout_aplying_a_valid_promo_code_on_not_stm_product","historyId":"0db0791df25f1cf3b277d7a140fffd12","time":{"start":1733835859023,"stop":1733835935790,"duration":76767},"status":"broken","statusMessage":"ValueError: Product not available, please select another product","statusTrace":"page_fixture = <Page url='https://garwin.ru/tovar/nasos-drenazhnyy-pogruzhnoy-4-gnom-25-20'>\nbase_url = 'https://garwin.ru'\n\n    @pytest.mark.auth\n    @allure.title(\"Применение валидного промокода к неподходящему товару\")\n    def test_checkout_aplying_a_valid_promo_code_on_not_stm_product(page_fixture, base_url):\n        checkout_page = CheckoutPage(page_fixture)\n        cart_page = CartPage(page_fixture)\n        cart_page.open(base_url)\n        cart_page.clear_cart()\n>       cart_page.add_to_cart_not_stm_product(base_url)\n\ntests/test_checkout.py:86: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <page_objects.cart_page.CartPage object at 0x7f1cd1449160>\nurl = 'https://garwin.ru/tovar/nasos-drenazhnyy-pogruzhnoy-4-gnom-25-20'\n\n    @allure.step(\"Добавляю несколько привлеченных позиций в корзину\")\n    def add_to_cart_not_stm_product(self, url):\n        urls_to_check = [\n            f\"{url}/tovar/lom-oborochnyy-lo-3-0\",\n            f\"{url}/tovar/nasos-drenazhnyy-pogruzhnoy-4-gnom-25-20\"\n        ]\n    \n        for url in urls_to_check:\n            self.page.goto(url)\n    \n            try:\n                # Попытка найти и нажать кнопку \"Добавить в корзину\"\n                # assert self.page.locator(\"flexRow-AIFE Price.ProductCardControls__Pricing__BasePrice.is--discounted\").is_visible()\n                self.page.locator(\".ProductDetailControls__AddToCartButton.Button.flexRow.size--normal.color--primary\").click()\n                break  # Прерываем цикл, если кнопка найдена и товар добавлен\n            except Exception:\n                print(f\"Add to cart button not found on {url}\")\n                continue  # Переходим к следующей ссылке, если кнопка не найдена\n        else:\n>           raise ValueError(\"Product not available, please select another product\")\nE           ValueError: Product not available, please select another product\n\npage_objects/cart_page.py:155: ValueError","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1733835149657,"stop":1733835149657,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1733835149657,"stop":1733835149658,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1733835149658,"stop":1733835149862,"duration":204},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop_policy","time":{"start":1733835149658,"stop":1733835149658,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1733835149658,"stop":1733835149658,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1733835149658,"stop":1733835149658,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1733835149658,"stop":1733835149658,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1733835149862,"stop":1733835149862,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1733835149862,"stop":1733835149862,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1733835149863,"stop":1733835150054,"duration":191},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_fixture","time":{"start":1733835858928,"stop":1733835859023,"duration":95},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"ValueError: Product not available, please select another product","statusTrace":"page_fixture = <Page url='https://garwin.ru/tovar/nasos-drenazhnyy-pogruzhnoy-4-gnom-25-20'>\nbase_url = 'https://garwin.ru'\n\n    @pytest.mark.auth\n    @allure.title(\"Применение валидного промокода к неподходящему товару\")\n    def test_checkout_aplying_a_valid_promo_code_on_not_stm_product(page_fixture, base_url):\n        checkout_page = CheckoutPage(page_fixture)\n        cart_page = CartPage(page_fixture)\n        cart_page.open(base_url)\n        cart_page.clear_cart()\n>       cart_page.add_to_cart_not_stm_product(base_url)\n\ntests/test_checkout.py:86: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <page_objects.cart_page.CartPage object at 0x7f1cd1449160>\nurl = 'https://garwin.ru/tovar/nasos-drenazhnyy-pogruzhnoy-4-gnom-25-20'\n\n    @allure.step(\"Добавляю несколько привлеченных позиций в корзину\")\n    def add_to_cart_not_stm_product(self, url):\n        urls_to_check = [\n            f\"{url}/tovar/lom-oborochnyy-lo-3-0\",\n            f\"{url}/tovar/nasos-drenazhnyy-pogruzhnoy-4-gnom-25-20\"\n        ]\n    \n        for url in urls_to_check:\n            self.page.goto(url)\n    \n            try:\n                # Попытка найти и нажать кнопку \"Добавить в корзину\"\n                # assert self.page.locator(\"flexRow-AIFE Price.ProductCardControls__Pricing__BasePrice.is--discounted\").is_visible()\n                self.page.locator(\".ProductDetailControls__AddToCartButton.Button.flexRow.size--normal.color--primary\").click()\n                break  # Прерываем цикл, если кнопка найдена и товар добавлен\n            except Exception:\n                print(f\"Add to cart button not found on {url}\")\n                continue  # Переходим к следующей ссылке, если кнопка не найдена\n        else:\n>           raise ValueError(\"Product not available, please select another product\")\nE           ValueError: Product not available, please select another product\n\npage_objects/cart_page.py:155: ValueError","steps":[{"name":"Открываю https://garwin.ru/cart","time":{"start":1733835859023,"stop":1733835866081,"duration":7058},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Нажимаю на кнопку 'Удалить'","time":{"start":1733835866081,"stop":1733835866115,"duration":34},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Добавляю несколько привлеченных позиций в корзину","time":{"start":1733835866115,"stop":1733835935789,"duration":69674},"status":"broken","statusMessage":"ValueError: Product not available, please select another product\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/playwright_tests_UI/playwright_tests_UI/page_objects/cart_page.py\", line 155, in add_to_cart_not_stm_product\n    raise ValueError(\"Product not available, please select another product\")\n","steps":[],"attachments":[],"parameters":[{"name":"url","value":"'https://garwin.ru'"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"page_fixture::0","time":{"start":1733835935803,"stop":1733835936695,"duration":892},"status":"passed","steps":[],"attachments":[{"uid":"b807690f97b7928c","name":"trace","source":"b807690f97b7928c.zip","type":"application/zip","size":3548579},{"uid":"39adda20a30b90d9","name":"failure_screenshot","source":"39adda20a30b90d9.png","type":"image/png","size":644802},{"uid":"dca0f8ff0a0dcc13","name":"page_source","source":"dca0f8ff0a0dcc13.html","type":"text/html","size":843749},{"uid":"b3564ecfa560ad44","name":"network_logs","source":"b3564ecfa560ad44.json","type":"application/json","size":548689}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},{"name":"browser::0","time":{"start":1733835985376,"stop":1733835985548,"duration":172},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1733835985551,"stop":1733835985565,"duration":14},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"auth"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_checkout"},{"name":"host","value":"fv-az768-560"},{"name":"thread","value":"4622-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_checkout"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"f7c2d8035476d13b","status":"broken","statusDetails":"ValueError: Product not available, please select another product","time":{"start":1733835782314,"stop":1733835855022,"duration":72708}},{"uid":"b8f9aade1db7324c","status":"broken","statusDetails":"ValueError: Product not available, please select another product","time":{"start":1733835703258,"stop":1733835778219,"duration":74961}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":1,"skipped":0,"passed":16,"unknown":0,"total":17},"items":[{"uid":"b2bb256e61beed16","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/301//#testresult/b2bb256e61beed16","status":"passed","time":{"start":1733796587091,"stop":1733796603190,"duration":16099}},{"uid":"9b279affa12bff7e","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/300//#testresult/9b279affa12bff7e","status":"passed","time":{"start":1733749292344,"stop":1733749307100,"duration":14756}},{"uid":"e45af1549bd5d249","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/299//#testresult/e45af1549bd5d249","status":"passed","time":{"start":1733710341064,"stop":1733710357708,"duration":16644}},{"uid":"729c90ee5e3c2d0","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/298//#testresult/729c90ee5e3c2d0","status":"passed","time":{"start":1733662665509,"stop":1733662682676,"duration":17167}},{"uid":"d48fef4972fb1442","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/297//#testresult/d48fef4972fb1442","status":"passed","time":{"start":1733624089901,"stop":1733624105479,"duration":15578}},{"uid":"ea1041645a267ebc","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/296//#testresult/ea1041645a267ebc","status":"passed","time":{"start":1733576170820,"stop":1733576187435,"duration":16615}},{"uid":"54d813c2b17e8260","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/295//#testresult/54d813c2b17e8260","status":"passed","time":{"start":1733537208306,"stop":1733537225939,"duration":17633}},{"uid":"4abe8f86df2725d","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/294//#testresult/4abe8f86df2725d","status":"passed","time":{"start":1733490027141,"stop":1733490043920,"duration":16779}},{"uid":"1543b572bdb4c6c4","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/293//#testresult/1543b572bdb4c6c4","status":"passed","time":{"start":1733450797010,"stop":1733450812976,"duration":15966}},{"uid":"908266bcd8816d3b","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/292//#testresult/908266bcd8816d3b","status":"passed","time":{"start":1733403765752,"stop":1733403783104,"duration":17352}},{"uid":"78a254cb97dc2465","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/291//#testresult/78a254cb97dc2465","status":"passed","time":{"start":1733364523575,"stop":1733364540106,"duration":16531}},{"uid":"d1bc0919ef9cbf4e","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/290//#testresult/d1bc0919ef9cbf4e","status":"passed","time":{"start":1733317394954,"stop":1733317412168,"duration":17214}},{"uid":"e033577a2a19baeb","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/289//#testresult/e033577a2a19baeb","status":"passed","time":{"start":1733278138846,"stop":1733278154856,"duration":16010}},{"uid":"15ad371751e7bcde","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/288//#testresult/15ad371751e7bcde","status":"passed","time":{"start":1733230953104,"stop":1733230971083,"duration":17979}},{"uid":"ff0c1dea0cdbf3e0","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/287//#testresult/ff0c1dea0cdbf3e0","status":"passed","time":{"start":1733191692597,"stop":1733191708365,"duration":15768}},{"uid":"37b0debe813435c8","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/286//#testresult/37b0debe813435c8","status":"passed","time":{"start":1733152252528,"stop":1733152270563,"duration":18035}}]},"tags":["auth"]},"source":"e359d814d7de107d.json","parameterValues":["'chromium'"]}