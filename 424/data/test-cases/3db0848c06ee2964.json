{"uid":"3db0848c06ee2964","name":"Применение валидного промокода к неподходящему товару","fullName":"tests.test_checkout#test_checkout_aplying_a_valid_promo_code_on_not_stm_product","historyId":"0db0791df25f1cf3b277d7a140fffd12","time":{"start":1738160500413,"stop":1738160523320,"duration":22907},"status":"failed","statusMessage":"AssertionError: Locator expected to have text 'В корзине нет товаров, к которым можно применить введенный промокод'\nActual value: Промокод не действителен \nCall log:\nLocatorAssertions.to_have_text with timeout 5000ms\n  - waiting for locator(\".Field__Info .Field__Text\")\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\"></p>\n  -   unexpected value \"\"\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\"></p>\n  -   unexpected value \"\"\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\n  -   unexpected value \"Промокод не действителен\"\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\n  -   unexpected value \"Промокод не действителен\"\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\n  -   unexpected value \"Промокод не действителен\"\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\n  -   unexpected value \"Промокод не действителен\"\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\n  -   unexpected value \"Промокод не действителен\"\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\n  -   unexpected value \"Промокод не действителен\"\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\n  -   unexpected value \"Промокод не действителен\"","statusTrace":"page_fixture = <Page url='https://garwin.ru/checkout'>\nbase_url = 'https://garwin.ru'\n\n    @pytest.mark.auth\n    @allure.title(\"Применение валидного промокода к неподходящему товару\")\n    def test_checkout_aplying_a_valid_promo_code_on_not_stm_product(page_fixture, base_url):\n        checkout_page = CheckoutPage(page_fixture)\n        cart_page = CartPage(page_fixture)\n        cart_page.open(base_url)\n        cart_page.clear_cart()\n        cart_page.add_to_cart_not_stm_product(base_url)\n        checkout_page.open(base_url)\n        checkout_page.promo_code.check_promo_code()\n        checkout_page.promo_code.activate_valid_promo_code()\n        with allure.step(\"Проверяю, что на странице отображается подсказка 'В корзине нет товаров, к которым можно применить введенный промокод'\"):\n>           expect(checkout_page.promo_code.promo_code_field_info()).to_have_text(\"В корзине нет товаров, к которым можно применить введенный промокод\")\nE           AssertionError: Locator expected to have text 'В корзине нет товаров, к которым можно применить введенный промокод'\nE           Actual value: Промокод не действителен \nE           Call log:\nE           LocatorAssertions.to_have_text with timeout 5000ms\nE             - waiting for locator(\".Field__Info .Field__Text\")\nE             -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\"></p>\nE             -   unexpected value \"\"\nE             -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\"></p>\nE             -   unexpected value \"\"\nE             -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\nE             -   unexpected value \"Промокод не действителен\"\nE             -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\nE             -   unexpected value \"Промокод не действителен\"\nE             -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\nE             -   unexpected value \"Промокод не действителен\"\nE             -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\nE             -   unexpected value \"Промокод не действителен\"\nE             -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\nE             -   unexpected value \"Промокод не действителен\"\nE             -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\nE             -   unexpected value \"Промокод не действителен\"\nE             -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\nE             -   unexpected value \"Промокод не действителен\"\n\ntests/test_checkout.py:89: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1738159605463,"stop":1738159605516,"duration":53},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop_policy","time":{"start":1738159605516,"stop":1738159605516,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1738159605516,"stop":1738159605516,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1738159605516,"stop":1738159605516,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1738159605516,"stop":1738159605516,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1738159605516,"stop":1738159605516,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1738159605516,"stop":1738159605516,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1738159605517,"stop":1738159605716,"duration":199},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1738159605716,"stop":1738159605716,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1738159605716,"stop":1738159605717,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1738159605717,"stop":1738159605899,"duration":182},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_fixture","time":{"start":1738160500320,"stop":1738160500413,"duration":93},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Locator expected to have text 'В корзине нет товаров, к которым можно применить введенный промокод'\nActual value: Промокод не действителен \nCall log:\nLocatorAssertions.to_have_text with timeout 5000ms\n  - waiting for locator(\".Field__Info .Field__Text\")\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\"></p>\n  -   unexpected value \"\"\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\"></p>\n  -   unexpected value \"\"\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\n  -   unexpected value \"Промокод не действителен\"\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\n  -   unexpected value \"Промокод не действителен\"\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\n  -   unexpected value \"Промокод не действителен\"\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\n  -   unexpected value \"Промокод не действителен\"\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\n  -   unexpected value \"Промокод не действителен\"\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\n  -   unexpected value \"Промокод не действителен\"\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\n  -   unexpected value \"Промокод не действителен\"","statusTrace":"page_fixture = <Page url='https://garwin.ru/checkout'>\nbase_url = 'https://garwin.ru'\n\n    @pytest.mark.auth\n    @allure.title(\"Применение валидного промокода к неподходящему товару\")\n    def test_checkout_aplying_a_valid_promo_code_on_not_stm_product(page_fixture, base_url):\n        checkout_page = CheckoutPage(page_fixture)\n        cart_page = CartPage(page_fixture)\n        cart_page.open(base_url)\n        cart_page.clear_cart()\n        cart_page.add_to_cart_not_stm_product(base_url)\n        checkout_page.open(base_url)\n        checkout_page.promo_code.check_promo_code()\n        checkout_page.promo_code.activate_valid_promo_code()\n        with allure.step(\"Проверяю, что на странице отображается подсказка 'В корзине нет товаров, к которым можно применить введенный промокод'\"):\n>           expect(checkout_page.promo_code.promo_code_field_info()).to_have_text(\"В корзине нет товаров, к которым можно применить введенный промокод\")\nE           AssertionError: Locator expected to have text 'В корзине нет товаров, к которым можно применить введенный промокод'\nE           Actual value: Промокод не действителен \nE           Call log:\nE           LocatorAssertions.to_have_text with timeout 5000ms\nE             - waiting for locator(\".Field__Info .Field__Text\")\nE             -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\"></p>\nE             -   unexpected value \"\"\nE             -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\"></p>\nE             -   unexpected value \"\"\nE             -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\nE             -   unexpected value \"Промокод не действителен\"\nE             -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\nE             -   unexpected value \"Промокод не действителен\"\nE             -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\nE             -   unexpected value \"Промокод не действителен\"\nE             -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\nE             -   unexpected value \"Промокод не действителен\"\nE             -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\nE             -   unexpected value \"Промокод не действителен\"\nE             -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\nE             -   unexpected value \"Промокод не действителен\"\nE             -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\nE             -   unexpected value \"Промокод не действителен\"\n\ntests/test_checkout.py:89: AssertionError","steps":[{"name":"Открываю https://garwin.ru/cart","time":{"start":1738160500413,"stop":1738160503894,"duration":3481},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Очищаю корзину","time":{"start":1738160503895,"stop":1738160506122,"duration":2227},"status":"passed","steps":[{"name":"Нажимаю на кнопку 'Удалить'","time":{"start":1738160503933,"stop":1738160505032,"duration":1099},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Подтверждаю удаление","time":{"start":1738160505032,"stop":1738160506122,"duration":1090},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Добавляю несколько привлеченных позиций в корзину","time":{"start":1738160506123,"stop":1738160512537,"duration":6414},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"url","value":"'https://garwin.ru'"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Открываю https://garwin.ru/checkout","time":{"start":1738160512537,"stop":1738160515112,"duration":2575},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Отменяю промокод если он был установлен","time":{"start":1738160515112,"stop":1738160516207,"duration":1095},"status":"passed","steps":[{"name":"Открываю блок 'Промокод'","time":{"start":1738160515112,"stop":1738160516193,"duration":1081},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Активирую валидный промокод","time":{"start":1738160516207,"stop":1738160518306,"duration":2099},"status":"passed","steps":[{"name":"Ввожу валидный промокод","time":{"start":1738160516207,"stop":1738160517237,"duration":1030},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Нажимаю 'Применить'","time":{"start":1738160517237,"stop":1738160518306,"duration":1069},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Проверяю, что на странице отображается подсказка 'В корзине нет товаров, к которым можно применить введенный промокод'","time":{"start":1738160518306,"stop":1738160523319,"duration":5013},"status":"failed","statusMessage":"AssertionError: Locator expected to have text 'В корзине нет товаров, к которым можно применить введенный промокод'\nActual value: Промокод не действителен \nCall log:\nLocatorAssertions.to_have_text with timeout 5000ms\n  - waiting for locator(\".Field__Info .Field__Text\")\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\"></p>\n  -   unexpected value \"\"\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\"></p>\n  -   unexpected value \"\"\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\n  -   unexpected value \"Промокод не действителен\"\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\n  -   unexpected value \"Промокод не действителен\"\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\n  -   unexpected value \"Промокод не действителен\"\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\n  -   unexpected value \"Промокод не действителен\"\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\n  -   unexpected value \"Промокод не действителен\"\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\n  -   unexpected value \"Промокод не действителен\"\n  -   locator resolved to <p data-v-f990f42a=\"\" class=\"Field__Text\">Промокод не действителен</p>\n  -   unexpected value \"Промокод не действителен\"\n\n","statusTrace":"  File \"/home/runner/work/playwright_tests_UI/playwright_tests_UI/tests/test_checkout.py\", line 89, in test_checkout_aplying_a_valid_promo_code_on_not_stm_product\n    expect(checkout_page.promo_code.promo_code_field_info()).to_have_text(\"В корзине нет товаров, к которым можно применить введенный промокод\")\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 20408, in to_have_text\n    self._sync(\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/playwright/_impl/_assertions.py\", line 471, in to_have_text\n    await self._expect_impl(\n  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/playwright/_impl/_assertions.py\", line 70, in _expect_impl\n    raise AssertionError(\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":12,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"page_fixture::0","time":{"start":1738160523336,"stop":1738160523794,"duration":458},"status":"passed","steps":[],"attachments":[{"uid":"747fd21f2d6d26c6","name":"trace","source":"747fd21f2d6d26c6.zip","type":"application/zip","size":3146077},{"uid":"c91894958b1f45dd","name":"failure_screenshot","source":"c91894958b1f45dd.png","type":"image/png","size":239176},{"uid":"9aa36ef6863202ea","name":"page_source","source":"9aa36ef6863202ea.html","type":"text/html","size":287450},{"uid":"b5ad582c8c59ee9b","name":"network_logs","source":"b5ad582c8c59ee9b.json","type":"application/json","size":2}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},{"name":"browser::0","time":{"start":1738161351738,"stop":1738161351977,"duration":239},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1738161351983,"stop":1738161351995,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"auth"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_checkout"},{"name":"host","value":"fv-az1019-478"},{"name":"thread","value":"4776-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_checkout"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"}],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["auth"]},"source":"3db0848c06ee2964.json","parameterValues":["'chromium'"]}